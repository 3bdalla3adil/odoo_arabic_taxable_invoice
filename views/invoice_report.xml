<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="custom_internal_layout" inherit_id="web.internal_layout">
            <xpath expr="//div[hasclass('header')]" position="replace">
            </xpath>
        </template>
        <template id="report_invoice_document">
            <t t-call="odoo_arabic_taxable_invoice.custom_internal_layout">
                <t t-set="o" t-value="o.with_context(lang=lang)"/>
                <style>
                    @font-face {
                    font-family: 'Tajawal-Black';
                    src: local('Tajawal'), local('Tajawal'), url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-Black.ttf)
                    format('opentype');
                    }
                    @font-face {
                    font-family: 'Tajawal-Bold';
                    src: local('Tajawal'), local('Tajawal'), url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-Bold.ttf)
                    format('opentype');
                    }
                    @font-face {
                    font-family: 'Tajawal-ExtraBold';
                    src: local('Tajawal'), local('Tajawal'),
                    url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-ExtraBold.ttf) format('opentype');
                    }
                    @font-face {
                    font-family: 'ExtraLigh';
                    src: local('Tajawal'), local('Tajawal'),
                    url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-ExtraLigh.ttf) format('opentype');
                    }
                    @font-face {
                    font-family: 'Tajawal-Light';
                    src: local('Tajawal'), local('Tajawal'), url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-Light.ttf)
                    format('opentype');
                    }
                    @font-face {
                    font-family: 'Tajawal-Medium';
                    src: local('Tajawal'), local('Tajawal'), url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-Medium.ttf)
                    format('opentype');
                    }
                    @font-face {
                    font-family: 'Tajawal-Regular';
                    src: local('Tajawal'), local('Tajawal'),
                    url(/odoo_arabic_taxable_invoice/static/src/fonts/Tajawal-Regular.ttf) format('opentype');
                    }
                    .regular{
                    font-family: Tajawal-Regular ;
                    }
                    * {
                    font-family: Tajawal-Regular !important;
                    }
                    .black{
                    font-family: Tajawal-Black !important;
                    /*font-weight: bold;*/
                    }
                    .light{
                    font-family: Tajawal-Light;
                    }
                    .address_block span{
                    line-height: initial !important;
                    }
                    .table-border {
                        border: 1px solid !important;
                    }
                    table{
                        margin-top: 3px !important;
                    }
                    .product_block td{
                        border-right: 1px solid;
                        border-left: 1px solid;

                        border-top: 0px !important;
                        padding: 5px 0px 5px 0px !important;
                    }
                    .header {
                      margin-bottom: 3px !important
                    }
                </style>
                <div class="page" style="margin-bottom:5px">
                    <div class="header">
                      <div class="row">
                        <div class="col-4" style="margin-bottom:-20px !important">
                           <div id="title" style="text-align: left;font-size: 20px;" class="black">
                            <t t-if="o.move_type in ('out_refund', 'in_refund')">
                                <span>فاتورة مرتجعات</span>
                            </t>
                            <t t-else="o.move_type in ('out_invoice', 'in_invoice')">
                                 <span>فاتورة ضريبية</span>
                            </t>
                            </div>
                            <div style="margin:20px" id="invoice-detail">
                             
                                    
                                    <div class="text-center regular">
                                        <span t-field="o.name"/>:<span>رقم الفاتورة </span>
                                    </div>
                                    
                                   
                                    <div class="text-center regular">
                                        <span t-field="o.invoice_date"/>:<span>تاريخ الفاتورة </span>
                                    </div>
                                                                   
                            </div>
                            
                            <div id="barcode" style="margin-top:30px;margin-left:40px">
                              <div  style="border: 1px solid white;">
                                   
                                   <img t-if="o.get_qr_code()"
								style="display:block;"
								t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', o.get_qr_code(), 130, 130)"/>  
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                          <div id="logo" class="regular">
                                <div   style="border: 1px solid white;">
                                    <img width="220px" height="220px" t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="margin-top:100px" alt="Logo"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                          <div id="company_detail" class="regular">
                                  
                                    <div style="text-align: right;font-size: 20px;" class="black">
                                        <t t-raw="o.company_id.name or ''"/>
                                    </div>
                                    <div style="text-align: right;font-size: 20px;" class="black">
                                        <t t-raw="o.company_id.street or ''"/>
                                    </div>
                                    <div style="text-align: right;font-size: 14px;" class="black">
                                        <span><t t-raw="o.company_id.street or ''"/>:</span><span>رقم السجل التجاري</span>
                                    </div>
                                    <div style="text-align: right;font-size: 14px;" class="black">
                                        <span><t t-raw="o.company_id.street or ''"/>:</span><span>رقم التعريف الضريبي:</span>
                                    </div>
                                     <div style="text-align: right;font-size: 20px;margin-top:35px" class="black">
                                       <span>:</span><span>حررت الفاتورة ل</span>
                                    </div>
                                     <div style="text-align: right;font-size: 20px;" class="black">
                                        <span><t t-raw="o.partner_id.name or ''"/>:</span><span>السادة</span>
                                    </div>
                                    <div style="text-align: right;font-size: 20px;" class="black">
                                        <span><t t-raw="o.partner_id.contact_address or ''"/>:</span><span>العنوان</span>
                                    </div>
                                     <div style="text-align: right;font-size: 20px;" class="black">
                                       <span><t t-raw="o.patient.ssn or ''"/>:</span><span>رقم الهوية</span>
                                    </div>
                               
                            </div>
                        </div>
                         <style>
                          .table-border {
                            border: 1px solid !important;
                            }
                            table{
                            margin-top: 3px !important;
                            }
                            .product_block td{
                            border-right: 1px solid;

                            border-top: 0px !important;
                            padding: 5px 0px 5px 0px !important;
                            }
                        </style>
                       
                    </div>
                    <table class="table table-bordered">
                         <thead style="font-size: 14px; line-height: 1.2;margin-top:0px">
                                <tr class="black" style="background-color: #dfdfdf;height:40px">
                                    
                                    <td class="text-center table-border" width="12%">المجموع الجزئي</td>
                                    <td class="text-center table-border" width="6%"> معدل الضريبة</td>
                                    <td class="text-center table-border" width="10%"> المبلغ الخاضع للضريبة</td>
                                    <td class="text-center table-border" width="12%"> الخصم </td>
                                    <td class="text-center table-border" width="12%"> سعر الوحدة</td>
                                    <td class="text-center table-border" width="12%">الكمية</td>
                                    <td class="text-center table-border" width="68%">الوصف</td>
                                    <td class="text-center table-border" width="12%">الكود</td>
                                </tr>
                               
                            </thead>
                        <tbody style="font-size: 14px; line-height: 0.2;">
                            
                            <t t-foreach="o.invoice_line_ids" t-as="l">
                              
                                <tr t-att-class="'regular product_block align-items-center font-weight-bold o_line_section' if l.display_type == 'line_section' else ' regular product_block align-items-center font-italic o_line_note' if l.display_type == 'line_note' else 'regular product_block align-items-center'">
                                 
                                    <td class="text-center" width="12%">
                                        <div class="mt-2">
                                            <span class="mt-2" t-esc="'{:.2f}'.format(l.price_total)"/>
                                        </div>
                                    </td>
                                    <td class="text-center" width="6%">
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="l.quantity and '{:.2f}'.format((l.price_total- l.price_subtotal)/l.quantity) or 0.0"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>
                                    </td>
                                    <td class="text-center" width="10%" >
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="'{:.2f}'.format(l.price_total)"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>
                                    </td>
                                    <td class="text-center" width="12%">
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="'{:.2f}'.format(l.price_unit)"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>
                                    </td>
                                    <td class="text-center" width="12%">
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="'{:.2f}'.format(l.discount)"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>
                                    </td>
                                    <td class="text-center" width="12%">
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="'{:.2f}'.format(l.quantity)"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>

                                    </td>
                                    <td class="text-center" width="68%" >
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="l.name[:68]"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>

                                    </td>
                                     <td class="text-center" width="12%">
                                        <t t-if="not l.display_type">
                                            <div class="mt-2">
                                                <span t-esc="l.ref"/>
                                            </div>
                                        </t>
                                        <t t-else=""/>

                                    </td>
                                </tr>
                            </t>

                          
                        </tbody>
                        </table>
                        </div>
                      </div>
                      
                    <table class="table table-sm o_main_table" name="invoice_line_table">
                       <tr>
                                   
                          <td class="regular table-border" width="20%" style="border-right: 1px solid;border-bottom:1px solid;border-top:1px solid black;background-color: #dfdfdf;">
                                     
                                    <span t-field="o.amount_untaxed"/>
                                    </td>
                                     <td width="80%" class="text-left black" style="background-color: #dfdfdf;border-bottom:1px solid;border-top:1px solid black;border-right: 1px solid;">
                                    الاجمالي الجزئي
                                    </td>
                                   
                                </tr>
                                <tr>
                                   
                                     <td class="regular table-border" width="20%" style="border-right: 1px solid;border-bottom:1px solid;border-top:1px solid black;background-color: #dfdfdf;">
                                        <span t-field="o.amount_tax_signed"/>
                                    </td>
                                    <td width="80%" class="text-left black" style="background-color: #dfdfdf;border-bottom:1px solid;border-top:1px solid black;border-right: 1px solid;">
                                        ضريبة القيمة المضافة %15
                                    </td>
                                   
                                </tr>
                                 <tr>
                                    
                                     <td class="regular table-border" width="20%" style="border-right: 1px solid;border-bottom:1px solid;border-top:1px solid black;background-color: #dfdfdf;">
                                        <span t-field="o.amount_total"/>
                                    </td>
                                    <td width="80%" class="text-left black" style="background-color: #dfdfdf;border-bottom:1px solid;border-top:1px solid black;border-right: 1px solid;">
                                        الاجمالي شامل ضريبة القيمة المضافة
                                    </td>
                                   
                                </tr>
                                 <tr>
                                     <td class="regular table-border" width="20%" style="border-right: 1px solid;border-bottom:1px solid;border-top:1px solid black;background-color: #dfdfdf;">
                                    </td>
                                    <td width="80%" class="text-left black" style="background-color: #dfdfdf;border-bottom:1px solid;border-top:1px solid black;border-right: 1px solid;">
                                        المدفوع
                                    </td>
                                   
                                </tr>
                                 <tr>
                                    
                                   
                                     <td class="regular table-border" width="20%" style="border-right: 1px solid;border-bottom:1px solid;border-top:1px solid black;background-color: #dfdfdf;">
                                    </td>
                                    <td width="80%" class="text-left black" style="background-color: #dfdfdf;border-bottom:1px solid;border-top:1px solid black;border-right: 1px solid;">
                                       المبلغ المستحق
                                    </td>
                                   
                                </tr>
                                 
                    </table>
                      <div style="margin-top:10px" class="text-right">
                            <p><span>:</span><span>اسم المستلم:</span></p>
                            <p><span>:</span><span>توقيع المستلم:</span></p>
                        </div>
                        <div class="text-center">
                            <p>أقصى موعد لاستبدال او ارجاع البضاعة هو ثلاثة ايام من تاريخ الفاتورة</p>
                        </div>
                   
                
            </t>
        </template>
        <template id="report_invoice">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="lang" t-value="o.user_id.sudo().lang if o.move_type in ('in_invoice', 'in_refund') else o.partner_id.lang" />
                    <t t-call="odoo_arabic_taxable_invoice.report_invoice_document" t-lang="lang" />
                </t>
            </t>
        </template>
    </data>
</odoo>
